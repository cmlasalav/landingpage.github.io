(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{5498:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/[_id]",function(){return s(4421)}])},7148:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(4848),n=s(4335),r=s(6540),l=s(8065),o=s(4811),c=s(2939),i=s(5854),d=s(6715);let m="http://localhost:5000";function u(e){let{closeForm:t,parentId:s=null,postId:u,onAddComment:x,editComment:h}=e,{showToast:g}=(0,o.d)();(0,d.useRouter)();let{userName:p}=(0,c.w)(),[y,f]=(0,r.useState)({Author:p,CommentBody:"",ParentId:s,PostId:u}),[j,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h&&f(e=>({...e,...h,Author:p}))},[h,p]);let v=e=>{f({...y,[e.target.name]:e.target.value})},w=async e=>{e.preventDefault(),b(!0);try{if(h)try{let e=await n.A.put("".concat(m,"/comment/").concat(h._id),y,{withCredentials:!0});200===e.status&&(g({message:"modal.edit.comment",typeMessage:"success"}),t(),window.location.reload())}catch(e){g({message:"modal.error.edit.comment",typeMessage:"error"})}else try{let e=await n.A.post("".concat(m,"/comment"),y,{withCredentials:!0});201===e.status&&(g({message:"modal.success.comment",typeMessage:"success"}),x&&x(e.data.newComment),t())}catch(e){g({message:"modal.error.comment",typeMessage:"error"})}}catch(e){g({message:"general.error",typeMessage:"error"})}finally{b(!1)}},N=h?"comment.form.edit":"comment.form.send",A=h?"bg-yellow-500 hover:bg-yellow-600":"bg-blue-500 hover:bg-blue-600";return(0,a.jsxs)(a.Fragment,{children:[j&&(0,a.jsx)(i.A,{duration:3e3}),(0,a.jsxs)("form",{onSubmit:w,className:"mt-4 p-4 bg-white rounded-lg shadow ".concat(h?"absolute top-full left-0 z-10 w-full md:w-96":""),children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("label",{className:"block text-sm font-bold mb-2",children:[(0,a.jsx)(l.A,{id:"form.author",defaultMessage:"Author: "}),(0,a.jsx)("input",{type:"text",name:"Author",value:p,required:!0,readOnly:!0,onChange:v,className:"mt-1 ml-2 px-3 py-2 bg-gray-100 border rounded-md w-full md:w-64"})]})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("label",{className:"block text-sm font-bold mb-2",children:[(0,a.jsx)(l.A,{id:"comment.form.body",defaultMessage:"Comment: "}),(0,a.jsx)("textarea",{name:"CommentBody",value:y.CommentBody,onChange:v,required:!0,className:"mt-1 px-3 py-2 w-full h-24 border rounded-md resize-none"})]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsxs)("button",{type:"submit",className:"px-4 py-2 text-white rounded-md hover:bg-gray-400 transition duration-300 ".concat(A),children:[(0,a.jsx)(l.A,{id:N,defaultMessage:"Send"})," "]}),(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-white rounded-md hover:bg-gray-400 transition duration-300 bg-red-600",children:(0,a.jsx)(l.A,{id:"form.cancel",defaultMessage:"Cancel"})})]})]})]})}},6678:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(4848),n=s(4335),r=s(6540),l=s(4811);function o(e){let{authorToken:t}=e,{showToast:s}=(0,l.d)(),[o,c]=(0,r.useState)("");return(0,r.useEffect)(()=>{let e=async()=>{try{let e=await n.A.get("".concat("http://localhost:5000","/user/").concat(t));if(200===e.status){let t=e.data;c(t)}else s({message:"error.info.user",typeMessage:"error"}),c("user")}catch(e){s({message:"error.info.user",typeMessage:"error"}),c("user")}};t&&e()},[t]),(0,a.jsx)("span",{children:o})}},4421:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(4848),n=s(4335),r=s(9965),l=s.n(r),o=s(7885),c=s(6540),i=s(6715),d=s(4883),m=s(6678),u=s(8065),x=s(4811),h=s(7148);function g(e){let{postId:t}=e,s=()=>"true"===localStorage.getItem("isAuthenticated"),r=(0,i.useRouter)(),{showToast:l}=(0,x.d)(),[d,g]=(0,c.useState)([]),p=(0,c.useRef)({}),[y,f]=(0,c.useState)(null),[j,b]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),[N,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{t&&(async()=>{try{let e=await n.A.get("".concat("http://localhost:5000","/comment/").concat(t));if(201===e.status){let t=e.data;g(t)}else g([])}catch(e){e.response&&404===e.response.status?(g([]),e.response.data.message&&l({message:"comment.noComment.error",typeMessage:"error"})):l({message:"comment.error",typeMessage:"error"})}finally{b(!1)}})()},[t]),(0,c.useEffect)(()=>{if(r.asPath.includes("#comment-")){let e=r.asPath.split("#comment-")[1];f(e),setTimeout(()=>{p.current[e]&&p.current[e].scrollIntoView({behavior:"smooth"})},100)}},[r.asPath,d]);let C=e=>{w(e),A(!1)},_=()=>{w(null),A(!1)},M=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.filter(e=>e.ParentId===n).map(r=>(0,a.jsxs)("div",{id:"comment-".concat(r._id),ref:e=>{p.current[r._id]=e},className:"mb-4 ".concat(n?"ml-6":""),children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 ".concat(n?"border-l-4 border-l-blue-500":""," ").concat(y===r._id?"ring-2 ring-blue-500":""),children:[(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("strong",{className:"font-semibold",children:(0,a.jsx)(m.A,{authorToken:r.Author})}),": ",r.CommentBody]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:(0,a.jsx)(o.XU,{value:r.CommentDate,year:"numeric",month:"long",day:"numeric",weekday:"long"})}),s()&&(0,a.jsx)("button",{className:"text-blue-500 hover:text-blue-700 transition duration-300 ease-in-out",onClick:()=>C(r._id),children:(0,a.jsx)(u.A,{id:"comment.reply.button",defaultMessage:"Reply"})}),v===r._id&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(h.A,{closeForm:_,parentId:r._id,postId:t,onAddComment:e=>g(t=>[...t,e])})})]}),M(e,r._id)]},r._id))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-12 pt-8 border-t border-gray-200",children:(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",onClick:()=>{s()?(A(!0),w(null)):(r.push("/auth"),l({message:"auth.page.title",typeMessage:"error"}))},children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,a.jsx)("span",{children:(0,a.jsx)(u.A,{id:"comment.title",defaultMessage:"Comments"})})]})})}),(0,a.jsx)("div",{className:"max-w-3xl mx-auto px-2 sm:px-6 lg:px-1 py-6",children:(0,a.jsxs)(a.Fragment,{children:[0===d.length&&(0,a.jsx)("p",{className:"text-gray-500",children:(0,a.jsx)(u.A,{id:"comment.noComment.error",defaultMessage:"No comments available."})}),(0,a.jsx)("div",{className:"space-y-4",children:M(d)}),N&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(h.A,{closeForm:_,postId:t,onAddComment:e=>g(t=>[...t,e])})})]})})]})}var p=s(5854),y=s(3735);function f(){var e;let[t,s]=(0,c.useState)(null),[r,u]=(0,c.useState)(!0),x=(0,i.useRouter)(),{_id:h}=x.query;return((0,c.useEffect)(()=>{x.isReady&&h&&(async()=>{try{let e=await n.A.get("".concat("http://localhost:5000","/blog/").concat(h),{withCredentials:!0});201===e.status&&(s(e.data),u(!1))}catch(e){console.log(e)}finally{u(!1)}})()},[h]),r)?(0,a.jsx)(p.A,{duration:3e3}):t?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(y.A,{children:(0,a.jsxs)(d.P.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}}),(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:t.PostTitle}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:(0,a.jsx)(m.A,{authorToken:t.Author})}),(0,a.jsx)("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:(0,a.jsx)("span",{children:(0,a.jsx)(o.XU,{value:t.PostDate,year:"numeric",month:"long",day:"numeric",weekday:"long"})})})]})]}),(0,a.jsx)("div",{className:"relative w-full h-auto mb-8 rounded-xl overflow-hidden",children:null===(e=t.PostBody)||void 0===e?void 0:e.map((e,t)=>(0,a.jsx)("div",{className:"mb-6",children:"text"===e.contentType?(0,a.jsx)("p",{className:"text-base text-gray-700",children:e.contentBody}):"image"===e.contentType?(0,a.jsx)("div",{className:"relative w-full h-64 sm:h-96",children:(0,a.jsx)(l(),{src:e.contentBody,alt:"Content image ".concat(t),layout:"fill",objectFit:"cover",className:"rounded-xl"})}):(0,a.jsx)("p",{className:"text-red-500",children:"Unknown content type"})},t))}),(0,a.jsx)(g,{postId:t._id})]})})}):x.push("/404")}}},e=>{var t=t=>e(e.s=t);e.O(0,[909,106,76,883,119,636,593,792],()=>t(5498)),_N_E=e.O()}]);